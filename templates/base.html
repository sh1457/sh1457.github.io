{% import "macros/opengraph.html" as social %}

<!DOCTYPE html>
<html lang="en">
  <head>
    {% block head -%}
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <title>{% block title %}{{ config.title}}{% endblock title %}</title>

    <meta name="description" content="{{ config.description }}" />
    <meta name="author" content="{{ config.extra.author }}" />
    <meta name="keywords" content="{{ config.extra.keywords | join(sep=', ') }}" />
    {% block og_preview %} {{ social::og_preview() }} {%- endblock og_preview %}
    <link rel="icon" type="image/ico" href="{{ get_url(path='img/rmbrll.ico', trailing_slash=false) | safe }}" />
    <link rel="stylesheet" href="{{ get_url(path='css/tailwind.css', trailing_slash=false) | safe }}" />

    {% block rss -%}
    <link
      rel="alternate"
      type="application/atom+xml"
      title="RSS"
      href="{{ get_url(path='atom.xml', trailing_slash=false) | safe }}"
    />
    {%- endblock rss -%}
    {%- endblock head %}
  </head>

  <body class="box-border mx-auto text-black bg-white dark:bg-neutral-900 dark:text-white">
    <header class="flex flex-row items-center gap-4 px-4 pt-4 pb-2 sm:px-8 sm:gap-6">
      <a class="flex flex-col justify-center text-current sm:gap-2 sm:flex-row group shrink-0" href="/">
        <svg id="logo" class="self-center transition duration-300 ease-in-out group-hover:scale-125 motion-reduce:transition-none motion-reduce:transform-none" width="40" height="40" viewBox="0 0 110 110" preserveAspectRatio="xMidYMid meet">
          <rect x="0" y="0" width="100%" height="100%" fill="transparent" />
          <circle cx="50%" cy="50%" r="50" fill="transparent" stroke="#2B2B2B" filter="url(#drop_shadow)" />
          <g style="isolation: isolate;">
            <g style="mix-blend-mode: multiply" filter="url(#filter0_f_0_1)">
              <circle cx="50%" cy="50%" r="49" fill="#FC6F0911" stroke="#2B2B2B" />
            </g>
            <g class="transition duration-300 ease-in-out origin-center group-hover:animate-smoke">
              <g style="mix-blend-mode: multiply" filter="url(#filter1_f_0_1)">
                <circle cx="40%" cy="55%" r="29" fill="#FC090999" />
              </g>
              <g style="mix-blend-mode: multiply" filter="url(#filter2_f_0_1)">
                <circle cx="40%" cy="55%" r="9" fill="#FC0909" />
              </g>
            </g>
          </g>
          <g transform="translate(-10,-10)
                        rotate(-4)
                        scale(1.07)" mask="url(#my_mask)">
              <mask id="my_mask">
                  <rect x="0" y="0" width="100%" height="100%" fill="#FFFFFF" />
                  <circle transform="translate(10,10)
                          rotate(4)
                          scale(0.92)" cx="50%" cy="50%" r="50" fill="transparent" stroke="#000000"
                      clip-path="url(#cut-off)" />
                  <path
                      d="M78.4877 53.8432C84.2991 65.4992 87.3591 77.122 87.6261 86.478C87.8945 95.8801 85.3478 102.792 80.2015 105.358C75.0553 107.924 68.0022 105.798 60.6549 99.9254C53.3435 94.0815 45.9026 84.643 40.0912 72.987C34.2798 61.3311 31.2198 49.7083 30.9528 40.3522C30.6844 30.9502 33.2311 24.0377 38.3773 21.4719C43.5236 18.9061 50.5767 21.0322 57.924 26.9049C65.2354 32.7487 72.6762 42.1873 78.4877 53.8432Z"
                      fill="#000000" />
              </mask>
              <path
                  d="M86.5343 48.2977C92.6731 60.6102 95.344 73.1689 94.7219 83.5068C94.0988 93.8602 90.1882 101.878 83.2869 105.319C76.3855 108.76 67.6289 107.058 58.9854 101.324C50.3547 95.5997 41.9323 85.9086 35.7935 73.5962C29.6548 61.2837 26.9839 48.725 27.606 38.3871C28.229 28.0337 32.1396 20.016 39.041 16.5752C45.9423 13.1343 54.6989 14.8363 63.3425 20.5695C71.9731 26.2942 80.3956 35.9853 86.5343 48.2977Z"
                  fill="#FC6F09" stroke="#000000" />
              <path
                  d="M82.1927 50.7573C88.2069 62.82 91.0853 74.9926 90.8974 84.9082C90.709 94.851 87.4506 102.377 81.3689 105.41C75.2872 108.442 67.3154 106.515 59.2614 100.681C51.2293 94.864 43.24 85.2396 37.2258 73.177C31.2116 61.1143 28.3333 48.9417 28.5211 39.026C28.7095 29.0833 31.9679 21.5569 38.0496 18.5247C44.1313 15.4924 52.1032 17.4197 60.1572 23.2529C68.1892 29.0702 76.1785 38.6946 82.1927 50.7573Z"
                  fill="#FC6F09" stroke="#000000" />
              <path
                  d="M78.4877 53.8432C84.2991 65.4992 87.3591 77.122 87.6261 86.478C87.8945 95.8801 85.3478 102.792 80.2015 105.358C75.0553 107.924 68.0022 105.798 60.6549 99.9254C53.3435 94.0815 45.9026 84.643 40.0912 72.987C34.2798 61.3311 31.2198 49.7083 30.9528 40.3522C30.6844 30.9502 33.2311 24.0377 38.3773 21.4719C43.5236 18.9061 50.5767 21.0322 57.924 26.9049C65.2354 32.7487 72.6762 42.1873 78.4877 53.8432Z"
                  fill="#FC6F09" stroke="#000000" />
          </g>
          <defs>
              <filter id="drop_shadow">
                  <feDropShadow dx="0" dy="0" stdDeviation="1" flood-color="#FFFFFF" />
              </filter>
              <filter id="filter0_f_0_1" x="5" y="5" width="100" height="100" filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB">
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
                  <feGaussianBlur stdDeviation="1" result="effect1_foregroundBlur_0_1" />
              </filter>
              <filter id="filter1_f_0_1" x="5" y="5" width="100" height="100" filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB">
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
                  <feGaussianBlur stdDeviation="7" result="effect1_foregroundBlur_0_1" />
              </filter>
              <filter id="filter2_f_0_1" x="0" y="0" width="100" height="100" filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB">
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
                  <feGaussianBlur stdDeviation="13" result="effect1_foregroundBlur_0_1" />
              </filter>
              <clipPath id="cut-off">
                  <rect x="5" y="8" width="28%" height="25%" fill="black" />
              </clipPath>
          </defs>
        </svg>
        <span id="title" class="self-center hidden font-serif text-lg italic font-semibold sm:text-xl sm:inline-block">
          my Remembrall
        </span>
        <span id="title-short" class="self-center font-serif italic font-semibold -rotate-3 text-md sm:hidden">
          myRemembrall
        </span>
      </a>
      <nav class="flex flex-row flex-wrap justify-end gap-4 sm:gap-6 grow">
        {%- for menu_link in config.extra.menu_links -%} {% set link_url = menu_link.url | replace(from="$BASE_URL", to=config.base_url) %}
        <a class="font-semibold text-md sm:text-lg text-primary-500 dark:text-primary-600" href="{{ link_url | safe }}">/{{ menu_link.name | lower }}</a>
        {%- endfor %}
      </nav>
      <div class="flex flex-row gap-4 sm:gap-6">
        <input type="checkbox" name="" id="dark-mode-toggle" class="hidden" />
        <label for="dark-mode-toggle" class="cursor-pointer">
          <svg
            id="sun"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="self-center hidden w-8 h-8 dark:inline fill-white stroke-white"
          >
            <path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
            <path d="M12 4v1M17.66 6.344l-.828.828M20.005 12.004h-1M17.66 17.664l-.828-.828M12 20.01V19M6.34 17.664l.835-.836M3.995 12.004h1.01M6 6l.835.836"></path>
          </svg>
          <svg
            id="moon"
            viewBox="0 0 24 24"
            stroke-width="1"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="self-center w-8 h-8 fill-black dark:hidden stroke-black"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M17.715 15.15A6.5 6.5 0 0 1 9 6.035C6.106 6.922 4 9.645 4 12.867c0 3.94 3.153 7.136 7.042 7.136 3.101 0 5.734-2.032 6.673-4.853Z"></path>
          </svg>
        </label>
        <a href="https://github.com/sh1457/sh1457.github.io">
          <svg viewBox="0 0 16 16" class="self-center w-7 h-7 fill-black dark:fill-white">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
          </svg>
        </a>
      </div>
    </header>

    <hr class="border-double border-opacity-70 border-y-4 border-y-secondary-600" />

    <section class="w-11/12 px-4 py-4 mx-auto">
      {% block content %}{% endblock content %}
    </section>

    <footer class="flex flex-row flex-wrap justify-around p-4 mx-4 font-mono text-xs italic font-thin text-center text-neutral-700 dark:text-neutral-400">
      <span>Any and all opinions listed here are my own and not representative of my employers; future, past and present.</span>
      <span class="text-right sm:text-center md:text-left lg:text-right xl:text-center">&copy; 2020-{{ now() | date(format="%Y") }} Sujith Sudarshan</span>
    </footer>

    <script>
      const toggleDarkMode = function () {
        var theme = 'light'
        if (
          localStorage.theme === 'dark' ||
          (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
        ) {
          document.documentElement.classList.add('dark')
          theme = 'dark'
        } else {
          document.documentElement.classList.remove('dark')
        }

        return theme
      }

      const themeSetter = function () {
        const checkbox = document.querySelector('#dark-mode-toggle')

        const theme = toggleDarkMode()

        if (theme === 'dark' && !checkbox.checked) {
          checkbox.checked = true
        }

        checkbox.addEventListener('click', function () {
          if (checkbox.checked) {
            localStorage.theme = 'dark'
          } else {
            localStorage.theme = 'light'
          }
          toggleDarkMode()
        })
      }

      if (document.readyState == 'loading') {
        const theme = toggleDarkMode()
        document.addEventListener('DOMContentLoaded', themeSetter);
      } else {
        themeSetter();
      }
    </script>
  </body>
</html>
